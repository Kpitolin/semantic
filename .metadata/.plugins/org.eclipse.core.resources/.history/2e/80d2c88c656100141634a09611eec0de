package service;

import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.FileWriter;
import java.io.IOException;
import java.util.ArrayList;
import java.util.List;

import org.json.simple.JSONArray;
import org.json.simple.JSONObject;

import au.com.bytecode.opencsv.CSVReader;

public class Service {
	private final static char SEPARATOR = ';';
	
	public File exploreSimiliratyFromCSV(String pathnameCSV, int indiceJacard) throws FileNotFoundException {
        File file = new File(pathnameCSV);
        FileReader fr = new FileReader(file);

        CSVReader csvReader = new CSVReader(fr, SEPARATOR);
        
        List<String[] > data = new ArrayList<String[] >();

        String[] nextLine = null;
        try {
			while ((nextLine = csvReader.readNext()) != null) {
			    int size = nextLine.length;

			    // ligne vide
			    if (size == 0) {
			        continue;
			    }
			    String debut = nextLine[0].trim();
			    if (debut.length() == 0 && size == 1) {
			        continue;
			    }

			    // ligne de commentaire
			    if (debut.startsWith("#")) {
			        continue;
			    }
			    data.add(nextLine);
			}
		} catch (IOException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
        for (String[] oneData : data) {
        
    	System.out.print(oneData[0]);
        }
        return file;
	}
	@SuppressWarnings("unchecked")
	public static void main(String[] args) throws FileNotFoundException {  

		JSONObject obj = new JSONObject();
		JSONObject temp = new JSONObject();
		
		temp.put("source",new Integer(1));
		temp.put("target",new Integer(0));
		
		JSONObject temp2 = new JSONObject();
		
		temp2.put("source",new Integer(1));
		temp2.put("target",new Integer(0));		
		
		JSONObject temp3 = new JSONObject();
		
		temp3.put("name","page1");
		temp3.put("url","http");	
		
		JSONArray listNodes = new JSONArray();
		JSONArray listLinks = new JSONArray();
		
		listLinks.add(temp);
		listLinks.add(temp2);
		listNodes.add(temp3);
		
		obj.put("links", listLinks);
		 
		try {
			File file= new File("JSONFile.json");  
	        file.createNewFile();  
	        FileWriter fileWriter = new FileWriter(file); 
			fileWriter.write(obj.toJSONString());
			fileWriter.flush();
			fileWriter.close();
		 
		} catch (IOException e) {
			e.printStackTrace();
		}
		 
		//System.out.print(obj);
		
		File file = new File("..\\ProjetSE\\matrice_jaccard.csv");
        FileReader fr = new FileReader(file);

        CSVReader csvReader = new CSVReader(fr, SEPARATOR);
        
        List<String[] > data = new ArrayList<String[] >();

        String[] nextLine = null;
        try {
			while ((nextLine = csvReader.readNext()) != null) {
			    int size = nextLine.length;

			    // ligne vide
			    if (size == 0) {
			        continue;
			    }
			    String debut = nextLine[0].trim();
			    if (debut.length() == 0 && size == 1) {
			        continue;
			    }

			    // ligne de commentaire
			    if (debut.startsWith("#")) {
			        continue;
			    }
			    data.add(nextLine);
			}
		} catch (IOException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
        for (String[] oneData : data) {
        
    	System.out.print(oneData[0]);
        }
	 } 
}
